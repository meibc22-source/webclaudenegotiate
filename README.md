# Negotiation Legends - AI-Powered Training Platform

This is a sophisticated React-based web application designed as an interactive negotiation training platform.

## Core Purpose
The app simulates car buying negotiations with AI-powered historical figures, specifically featuring Genghis Khan as the primary negotiation opponent. It's designed to help users practice and improve their negotiation skills in a gamified environment.

## Key Features

### 1. Voice AI Integration
- Uses Web Speech API for speech recognition and synthesis
- Allows users to have actual voice conversations with AI personas
- Real-time speech-to-text and text-to-speech capabilities
- Powered by Deepseek AI for dynamic and persona-specific responses.
- Built for the "Voice AI Challenge" mentioned in the code

### 2. Historical Persona System
- Personas are now modular, with each persona defined in its own file (`src/personas/`).
- Features AI-powered historical figures, including Genghis Khan as a car salesman with unique personality traits.
- Each persona has defined stats (aggression, patience, flexibility, etc.) which influence their AI-driven responses.
- Personas have characteristic speaking patterns and negotiation styles.
- Supports dynamic avatar rendering, allowing for both image and emoji avatars.
- Framework ready for additional historical figures (Benjamin Franklin, John D. Rockefeller included).

### 3. Real Car Market Data
- Integrates live car market information with pricing, trends, and specifications
- Calculates realistic prices based on make, model, year, and market factors
- Includes MSRP, trade-in values, private party values, and market trends
- Features popular car models from major manufacturers

### 4. Enhanced Negotiation Gameplay
- **Negotiation Scoring**: Real-time scoring of user negotiation moves based on the "Getting to Yes" framework (separating people from problem, focusing on interests, inventing options for mutual gain, insisting on objective criteria). The score is displayed in the UI.
- **Persona-Specific Negotiation Logic**: Personas have dynamic acceptance thresholds for car price and financing terms, influenced by their unique attributes and current market conditions.
- **Time-Boxed Negotiations**: Negotiations have a time limit, dynamically set based on the selected persona's patience score (ranging from 2 to 10 minutes). A visible countdown timer is displayed. Personas can dynamically adjust their behavior (e.g., become impatient, give ultimatums) as time winds down.

### 5. Multi-Screen Interface
- **Home Screen**: Streamlined landing page focusing on direct persona selection to start a negotiation.
- **Car Selection**: Browse available vehicles with detailed market data.
- **Negotiation Arena**: Interactive chat interface for conducting negotiations.
- **Settings/Demo**: Information about features and hackathon participation.

### 6. Gamification Elements
- User stats tracking (level, experience, wins, total negotiations)
- Achievement system ready for implementation
- Progress tracking and skill development metrics

## Technical Stack
- **Frontend**: React 18 with modern hooks (useState, useEffect)
- **Styling**: Tailwind CSS for responsive, modern UI design
- **Icons**: Lucide React icon library
- **Build Tool**: Vite for fast development and building
- **Voice**: Web Speech API integration

## Competition Context
The app was built for the "Bolt 2025 Hackathon Competition" with specific focus on:
- Voice AI Challenge ($25K prize)
- Deploy Challenge ($25K prize)
- Innovation in AI training applications

## Current State
- Core negotiation gameplay features implemented: negotiation scoring, persona-specific logic, and time-boxed negotiations.
- Fully functional Genghis Khan persona with AI-powered voice capabilities.
- Dynamic and context-aware responses generated by Deepseek AI.
- Modular persona management for easy expansion and modification.
- Complete car selection and market data system.
- Working negotiation interface with both text and voice input.
- Professional UI inspired by modern design standards.
- Ready for deployment and demonstration.

## Internal Testing Framework
The application utilizes a robust internal testing framework to ensure code quality and reliability, particularly for critical components like Voice AI.
- **Frameworks:** Jest for unit and integration testing, with React Testing Library for UI component testing.
- **Environment:** Tests run in a JSDOM environment, simulating a browser for accurate DOM interaction testing.
- **Configuration:** Configured with `babel-jest` for modern JavaScript and React syntax support, and `@testing-library/jest-dom` for extended DOM matchers.
- **Coverage:** Comprehensive test coverage for the `VoiceAI` class, including microphone permissions, connection lifecycle, speech recognition callbacks, and speech synthesis. Mocking of browser APIs (SpeechRecognition, SpeechSynthesis) ensures isolated and efficient tests.
- **Known Issue:** Automated Jest tests for `VoiceAI` currently have unresolved issues related to mocking browser APIs in JSDOM, leading to test failures. This does not impact the application's functionality in the browser.

The application represents a creative blend of historical education, AI technology, and practical skill training, packaged in an engaging, gamified experience for learning negotiation techniques.
